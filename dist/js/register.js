"use strict";$(function(){var t={user:!1,pass:!1,repass:!1,phone:!1,treaty:!1};function e(e,r,s,o,a){e.blur(function(){""!==e.val()&&r.test(e.val())?(s.hide(),s.prev().css("border-color","#aaa"),t[a]=!0):(s.show(),s.text(o[0]),s.css("color","red"),s.prev().css("border-color","red"),t[a]=!1)}),e.focus(function(){s.show(),s.text(o[1]),s.css("color","#575757")})}e($("[type=text]"),/(^\d{6,12}$)|(^[a-zA-Z]\w{5,11})$/,$(".register_form form p:nth-child(2)"),["请输入正确的用户名",'6-20个字符，支持字母、数字及"-""_"'],"user"),e($("[name=password]"),/^.{6,20}$/,$(".register_form form p:nth-child(4)"),["请输入格式正确的密码","6-20个字符，支持字母、数字或符号"],"pass"),$("[name=repass]").blur(function(){var e=$(".register_form form p:nth-child(6)");$("[name=repass]").val()!==$("[name=password]").val()?(e.show(),e.text("确认密码不一致"),e.css("color","red"),e.prev().css("border-color","red"),t.repass=!1):""===$("[name=repass]").val()?(e.show(),e.text("请输入确认密码"),e.css("color","red"),e.prev().css("border-color","red"),t.repass=!1):(t.repass=!0,e.prev().css("border-color","#aaa"),e.hide())}),$("[name=repass]").focus(function(){var e=$(".register_form form p:nth-child(6)");e.show(),e.text("请再次输入密码"),e.css("color","#575757")}),e($("[name=tell]"),/^1[3-9]\d{9}$/,$(".register_form form p:nth-child(8)"),["请输入格式正确的手机号码","请输入手机号码"],"phone"),$("[name=sub]").click(function(){$("[type=checkbox]").prop("checked")?t.treaty=!0:t.treaty=!1;var e=$("[name=username]").val(),r=$("[name=repass]").val(),s=$("[name=tell]").val();t.user&&t.pass&&t.repass&&t.phone&&t.treaty?($.post("http://store/src/php/register.php",{username:e,password:r,tell:s},function(e){layer.msg(e.meta.message),1==e.meta.status?setTimeout(function(){window.location.href="http://store/src/login.html"},1e3):2==e.meta.status&&$("[name=username]").val("").focus()},"json"),$(".bod").css("border-color","#aaa")):t.user&&t.pass&&t.repass&&t.phone?t.treaty||layer.msg("请勾选协议！"):($(".bod").css("border-color","red"),layer.msg("请完整填写注册信息！"))})});